# 主数据副本

副本，是一种主数据加载的来源方式。主数据副本包括副本建模、副本对照、副本查看和副本稽查，仅对主数据进行副本操作，不涉及物料主数据。

主要流程：建立副本模型，然后建立副本表和主数据实体的对照关系，最后转换数据。

## 副本建模

点击【主数据副本】→【副本建模】，进入副本建模页面，在此页面进行副本模型的新增、修改和删除等操作。副本表归属于远程系统注册的业务系统。

![](/articles/mdm/5-/images/image67.png)
 
<p align="center">图：副本建模</p>
 

➢ 新增

单击副本表分类树的根节点“业务系统”，单击〖新增〗，弹出一个窗口，填写内容（*表示必填项）后，单击〖确定〗。

![](/articles/mdm/5-/images/image68.png)
 
<p align="center">图：新增副本</p>
 

字段属性，包括：

1)	字段编码：唯一的英文编码标示，必输项；

2)	字段名称：中文属性名称，必输项；

3)	类型：副本表数据类型。包括：字符、整型、布尔、浮点型、日期、日期时间；

4)	长度：副本表数据类型的数据宽度，大于1；

5)	备注：对该字段的描述。

副本表字段，默认6个字段：

1)	MDMCODE：主数据编码，唯一标识；

2)	业务数据ID：针对于业务系统唯一表示，必输项；

3)	业务系统编码：业务系统的编码，必输项；

4)	数据状态：“1”，该数据为新数据；“2”，该数据已发起；

5)	是否纳入：是否写入主数据，0否，1是；

6)	版本号：主数据版本号。

通过增行（+号），按照主数据实体字段，新增副本表字段，建立二者的映射关系。

➢ 修改

选择副本表，单击〖修改〗，在弹出窗口中填写内容，然后点击〖确定〗。

➢ 删除

选择副本表，单击〖删除〗，弹出确认提示。

## 副本对照

点击【主数据副本】→【副本对照】，进入副本对照页面，在此页面建立副本表和主数据实体的对照关系。

![](/articles/mdm/5-/images/image69.png)
 
<p align="center">图：副本对照</p>
 

➢ 新增

配置副本表对应主数据实体。选择左侧主数据，单击〖新增〗按钮，在弹出窗口中填写内容，然后点击〖确定〗。

**基本信息**：编码、名称、业务系统、对照类型（接口、对照）、转换方向、接口。

对照，配置副本表与主数据实体，可实现简单对照关系。

转换方向，副本转换到主数据，或者主数据转换到副本。

接口，配置实现类路径，通过接口代码，实现复杂对照关系。

**副本表与实体**：副本表、主数据实体、主子类型。

![](/articles/mdm/5-/images/image70.png)
 
<p align="center">图：新增</p>
 
➢ 修改

选择某个对照关系，单击〖修改〗按钮，在弹出窗口中填写内容，然后点击〖确定〗。

➢ 删除

选择某个对照关系，单击〖删除〗按钮，弹出确认提示。

➢ 主数据到副本的对照流程

新增主数据到副本的对照关系，然后在【主数据共享】→【远程系统】配置对照关系，如下图：

![](/articles/mdm/5-/images/image71.png)
 
<p align="center">图：对照流程</p>
 

![](/articles/mdm/5-/images/image72.png)
 
<p align="center">图：远程系统</p>
 

在【数据分发】中，根据远程系统设置，把主数据分发到业务系统对应的副本中，或者分发到第三方服务。

## 副本查看

副本查看，可查看副本表数据，并可以依据副本对照关系，手动转换为对应单条主数据。

点击【主数据副本】→【副本查看】，进入副本查看页面，页面左边是副本表分类树，右边是副本表数据列表。

![](/articles/mdm/5-/images/image73.png)
 
<p align="center">图：副本查看</p>
 
➢ 过滤

选择副本，单击〖过滤〗，在弹出窗口中选择查询条件，然后点击〖确定〗。

![](/articles/mdm/5-/images/image74.png)
 
<p align="center">图：过滤</p>
 
➢ 下载

单击〖下载〗，系统会自动下载当前内容的Excel文件。

➢ 数据转化

首先需要在【主数据共享】→【主数据权限】设置主数据的操作权限，勾选“可读”和“可写”。选择副本表，然后选择副本对照，选择一条数据，单击〖数据转化〗，弹出如下窗口：

![](/articles/mdm/5-/images/image75.png)
 
<p align="center">图：数据转化</p> 


单击〖数据转换〗，“主数据”部分自动出现数据信息，单击〖保存主数据〗进行保存，完成数据转换。

【副本查看】节点会显示转换的数据；或者在【主数据维护】→【主数据维护】节点看到转换的数据。

## 副本稽查

副本稽查是查看主数据是哪个副本转换过来的。

点击【主数据副本】→【副本稽查】，进入副本稽查页面，页面左边是主数据分类树，右边是主数据列表。

![](/articles/mdm/5-/images/image76.png)
 
<p align="center">图：副本稽查</p>


选择一行主数据，单击〖数据稽查〗，进行数据稽查。

选择主数据，单击〖高级查询〗，按钮，弹出窗口，单击〖选择〗选择需要过滤的选项，单击〖确定〗完成过滤。单击〖重置〗按钮重置查询条件。
